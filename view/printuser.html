<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Upload file</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="style.css">


    <!-- <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
    <script src="https://use.fontawesome.com/releases/v5.0.8/js/all.js"></script>
    <link rel="stylesheet" href="style.css"> -->

    <title>Pring request</title>
</head>

<style>
    .btn {
        box-shadow: black;
    }

    #btnsubmit {
        text-align: center;
        height: 50px;
    }
</style>

<body>
    <nav class="navbar navbar-expand-lg navbar-dark ftco_navbar  ftco-navbar-light" id="ftco-navbar">
        <div class="container">
            <a class="navbar-brand" href="index.html"><img src="./img/copy.png" style="width: 150px;" alt=""></a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#ftco-nav"
                aria-controls="ftco-nav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="oi oi-menu"></span> Menu
            </button>

            <div class="list-inline mx-auto justify-content-center">
                <ul class="navbar-nav ml-auto">
                    <li class="nav-item "><a href="/home2" class="nav-link">Home</a></li>


                    <li class="nav-item"> <a id="rate" class="nav-link">Rate Price</a></li>
                    <li class="nav-item"> <a href="#" class="nav-link">Services</a></li>
                    <li class="nav-item"> <a href="#" class="nav-link">Contact</a></li>
                    <li class="nav-item"> <a href="/history" class="nav-link">History</a></li>

                </ul>
            </div>
            <button class="btn btn-outline-warning" style="width: 150px; border: none;"><i
                    class='fas fa-user-circle'></i> USER </button>

            <button class="btn btn-outline-danger" style="width: 150px; border: none;" id="btnsignout"><i
                    class='fas fa-user-circle'></i>LOG OUT</button>


        </div>
    </nav>

    <div class="container ">
        <div class="row mb-4">
            <div class="col-md-5 text-right">
                <div>
                    <img src="./img/print.png" style="width: 20%;">
                </div>
            </div>
            <div class="col-md-7 mt-4">
                <h1>MR.PRINTER</h1>
            </div>

        </div>
        <form action="/uploadsheet" method="post" enctype="multipart/form-data">
            <div class="row">
                <div class="col-md-12 text-center">
                    <div class="btn btn-warning mt-3 text-left" style="width: 1100px;">
                        <input type="file" name="fileUpload" id="fileUpload">
                    </div>
                </div>
                <!-- <div class="col-md-2 text-right">
                    <input type="submit" class="btn btn-primary mt-4" value="UPLOAD" style="height: 40px;">
                </div> -->
            </div>
            <div class="row">
                <div class="col-md-5 my-4">
                    <div class="row">
                        <div class="col-md-8">
                            <h4 class="mt-2">SETTING</h4>
                            <span><strong>COPIES</strong></span>
                            <div class="form-group">
                                <input type="text" class="form-control " id="txtcopy" value="1">

                                <div class=" mb-1  mt-4">
                                    </i> <select name="year" id="selectprint" class="form-control mt-3">

                                        <option value="All">Print All Page</option>
                                        <option value="2">Print Custom Page</option>

                                    </select>
                                </div>

                                <input type="text" class="form-control mt-1" id="printcustom" placeholder="1-5"
                                    style="width: 285px;">
                                <br>

                                <p> <strong>Paper</strong> </p>
                                </i> <select name="year" id="selectpaper" class="form-control mt-3">

                                    <option value="A4">A4</option>
                                    <option value="A3">A3</option>
                                    <option value="A2">A2</option>
                                    <option value="A1">A1</option>
                                    <option value="Poster">Poster</option>

                                </select>

                            </div>


                        </div>
                    </div>
                </div>
                <div class="col-md-2">

                </div>
                <div class="col-md-5 mt-5">
                    <span><strong>COLOR</strong> </span> <br>
                    <span class="mr-3"> <img src="./img/color.png" style="width: 60px;" class="mt-1"> </span>
                    <input type="radio" name="selectcolor" value="Balck White" checked> Black & White
                    <input type="radio" name="selectcolor" value="Color" class="ml-4"> Color
                    <!-- <input type="radio" name="rbnNumber" value="1" /> Number 1
                    <input type="radio" name="rbnNumber" value="" /> Number 2 -->
                    <br>

                    <div class="mt-3">
                        <strong>Duplex Print</strong> <br>
                        <span>
                            <span class="mr-4"> <img src="./img/oneside.png" style="width: 50px; " class="mt-1"></span>
                            <input type="radio" name="print" value="One Side" checked>One Side
                            <input type="radio" name="print" value="Both Side" class="ml-4">Both Side
                    </div>

                    <div class="mt-4">
                        <span> <strong>Orientation</strong> </span><br>
                        <span class="mr-4 "> <img src="./img/PO.png" style="width: 50px;" class="mt-1"> </span>
                        <input type="radio" name="orientation" value="Portrait" checked> Portrait<span class="ml-4">
                            <input type="radio" name="orientation" value="Horizontal"> Horizontal</span>
                    </div>
                </div>
            </div>

            <p id="btnsubmit">

                <button type="submit" class="btn btn-success text-light mt-3" id="submit">
                    <h4>SUBMIT</h4>
                </button>
            </p>
        </form>

    </div>

    <!-- <div class="container text-center"> -->
    <!-- </div> -->

    <!-- Modal -->
    <div class="modal fade" id="modelSubmit" tabindex="-1" role="dialog" aria-labelledby="modelTitleId"
        aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <!-- <h5 class="modal-title">Check information</h5> -->
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    Check information
                    <p id="modaltxt"></p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary" id="btnOK">OK</button>
                </div>
            </div>
        </div>
        <!-- Modal Rate-->
        <div class="modal fade " id="modalrate" tabindex="-1" role="dialog" aria-labelledby="modelTitleId"
            aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-body">
                    <div>
                        <img src="./img/rate.jpg" style="width: 200%; ">
                    </div>
                </div>

            </div>
        </div>

    </div>

    <!-- Footer -->
    <footer class="page-footer font-small teal pt-4">
        <div class="container-fluid text-center text-md-left" style="background-color: #242424;">
            <div class="row ">
                <div class="col-md-1">

                </div>
                <div class="col-md-4 mt-md-0 mt-3  text-light">
                    <h3 class="text-uppercase mt-3 " id="everyday">EVERY DAY</h3>
                    <h3>08:00- AM - 11:00 PM</h3>
                </div>
                <hr class="clearfix w-100 d-md-none pb-3 ">
                <div class="col-md-5 mb-md-0 mb-3  text-light ">
                    <div class="footercontact mt-3 text-right">
                        <h2 class="text-uppercase ">CONTACT US</h2>
                        <img src="./img/tel.png" style=" width:7%; height: 30% ;"> 085-325-411
                        <img src="./img/fax.png" style=" width:7%; height: 30% ;"> 053-912-040
                        <img src="./img/email.png" style="width:7%; height: 30% ;"> mrcopystaff@gmail.com
                    </div>
                </div>
                <div class="col-md-1">

                </div>
            </div>
        </div>
    </footer>


    <script>
        $(document).ready(function () {
            var custom = "";

            // var radioValue = $("input[name='gender']: checked").val();

            // if ($("#selectprint").val() == 2) {
            //     custom = $("#printcustom").val();
            // }
            // else {
            //     custom = $("#selectprint").val();
            // }
            //////////////////////////////////////////////////////////////////////

            $("#printcustom").hide();

            $(document).click(function () {
                if ($("#selectprint").val() == 2) {
                    $("#printcustom").show();
                }
                else {
                    custom = $("#selectprint").val();
                    $("#printcustom").hide();
                }
            });

            $("#rate").click(function () {
                $("#modalrate").modal("show");
                // $("#modalAdd").modal("hide");
            });

            $("#btnsignout").click(function (e) {
                window.location.replace("/")
            });



            // $("#submit").click(function () {
            //     // var formData = new FormData(this);

            //     var fd = new FormData();

            //     if ($("#selectprint").val() == 2) {
            //         custom = $("#printcustom").val();
            //     }
            //     else {
            //         custom = $("#selectprint").val();
            //     }
            //     // custom = $("#printcustom").val();
            //     var copy = $("#txtcopy").val();
            //     var paper = $("#selectpaper").val();
            //     var color = $("input[name='selectcolor']:checked").val();
            //     var duplex = $("input[name='print']:checked").val();
            //     var orient = $("input[name='orientation']:checked").val();
            //     $("#modelSubmit").modal("show");
            //     $('#modaltxt').html('<br/>COPIES: <b>' + copy + '</b>' +
            //         '<br/>Range: <b>' + custom + '</b>' +
            //         '<br/>Paper: <b>' + paper + '</b>' +
            //         '<br/>color: <b>' + color + '</b>' +
            //         '<br/>Duplex Print: <b>' + duplex + '</b>' +
            //         '<br/>Orientation: <b>' + orient + '</b>'
            //     );
            //     var dataArr = {
            //         SU_FILE: fd.append('file', $('#fileUpload').get(0).files[0]), // put the file here
            //     };

            //     $.ajax({
            //         type: "POST",
            //         url: "/uploadsheet",
            //         data:{ SU_COPIES: copy,SU_RANGE: custom,SU_PAPERTPE: paper,SU_COLOR:color,SU_ORIENTATION: orient,SU_DUPLEXPRINTING: duplex} ,
            //         success: function (data) {
            //             window.location.reload(data)
            //         },
            //         error: function () {
            //             // doesnt work
            //         }
            //     });

            //     // alert(copy+custom+color+paper+orient+duplex)
            //     // alert(formData)

            // });

            $("form").submit(function () {
                // var formData = new FormData(this);

                // var fd = new FormData();

                if ($("#selectprint").val() == 2) {
                    custom = $("#printcustom").val();
                }
                else {
                    custom = $("#selectprint").val();
                }
                // custom = $("#printcustom").val();
                var copy = $("#txtcopy").val();
                var paper = $("#selectpaper").val();
                var color = $("input[name='selectcolor']:checked").val();
                var duplex = $("input[name='print']:checked").val();
                var orient = $("input[name='orientation']:checked").val();
                $("#modelSubmit").modal("show");
                // $('#modaltxt').html('<br/>COPIES: <b>' + copy + '</b>' +
                //     '<br/>Range: <b>' + custom + '</b>' +
                //     '<br/>Paper: <b>' + paper + '</b>' +
                //     '<br/>color: <b>' + color + '</b>' +
                //     '<br/>Duplex Print: <b>' + duplex + '</b>' +
                //     '<br/>Orientation: <b>' + orient + '</b>'
                // );

                // var dataArr = {
                //     SU_FILE: fd.append('file', $('#fileUpload').get(0).files[0]), // put the file here
                // };

                const formData = new FormData(this);
                var name = "";
                var date = "";

                $.ajax({
                    method: " GET",
                    url: "/now",
                    success: function (data, state, xhr) {
                        date=data;
                    },
                });

                $.ajax({
                    method: "POST",
                    url: "/uploadsheet",
                    data: formData,
                    contentType: false,     //tell jQuery not to add a Content-Type header for us
                    processData: false,      //tell jQuery not to convert the formData object to a string
                    success: function (data, state, xhr) {
                        name = data;
                        console.log(data)

                        $.ajax({
                            type: "POST",
                            url: "/uploadsheet1",
                            data: { SU_FILE: name, SU_COPIES: copy, SU_RANGE: custom, SU_PAPERTPE: paper, SU_COLOR: color, SU_ORIENTATION: orient, SU_DUPLEXPRINTING: duplex,SU_DATETIME:date },
                            success: function (data) {
                                window.location.reload(data)
                            },
                            error: function () {
                                // doesnt work
                            }
                        });


                        // $.ajax({
                        //     type: "POST",
                        //     url: "/aaaa",
                        //     data: { name1: name, aq: txt1 },
                        //     success: function (response) {
                        //         alert("sfsdf")
                        //     }
                        // });
                    },
                    error: function (xhr, state, err) {
                        // $("h3").text(xhr.responseText);
                        alert("error")
                    }
                });

                // alert(copy+custom+color+paper+orient+duplex)
                // alert(formData)

            });

            // $("#submit").click(function () {

            //     if ($("#selectprint").val() == 2) {
            //         custom = $("#printcustom").val();
            //     }
            //     else {
            //         custom = $("#selectprint").val();
            //     }
            //     // custom = $("#printcustom").val();
            //     var copy = $("#txtcopy").val();
            //     var paper = $("#selectpaper").val();
            //     var color = $("input[name='selectcolor']:checked").val();
            //     var duplex = $("input[name='print']:checked").val();
            //     var orient = $("input[name='orientation']:checked").val();
            //     $("#modelSubmit").modal("show");
            //     $('#modaltxt').html('<br/>COPIES: <b>' + copy + '</b>' +
            //         '<br/>Range: <b>' + custom + '</b>' +
            //         '<br/>Paper: <b>' + paper + '</b>' +
            //         '<br/>color: <b>' + color + '</b>' +
            //         '<br/>Duplex Print: <b>' + duplex + '</b>' +
            //         '<br/>Orientation: <b>' + orient + '</b>'
            //     );
            //     // $('p').html('<br/>Range: <b>' + custom + '</b>');
            //     // alert(copy + custom + paper + color + duplex + orient)

            // });


        });

    </script>
</body>

</html>